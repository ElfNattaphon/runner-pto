{"file":"login-CFYbH8Vz.js","mappings":";;;;;;;;;;;;;;;;;;;;AAgBA,UAAM,KAAK,WAAA;AACX,UAAM,QAAQ,IAAI,EAAE;AACpB,UAAM,WAAW,IAAI,EAAE;AACvB,UAAM,YAAY,aAAA;AAClB,UAAM,WAAW,YAAY;AAC3B,UAAI;AACF,cAAM,OAAO,mBAAmB,EAAE,QAAQ,QAAQ,MAAM,EAAE,OAAO,MAAM,OAAO,UAAU,SAAS,MAAA,GAAS;AAC1G,cAAM,KAAK,MAAM,OAAO,cAAc;AACtC,kBAAU,QAAQ,EAAE;AAEpB,YAAI;AAAE,gBAAM,SAAa,MAAM,OAAO,kBAAkB;AAAG,gBAAM,KAAK,aAAA;AAAgB,cAAI,QAAQ,SAAU,IAAG,YAAY,OAAO,QAAQ;AAAG,cAAI,QAAQ,KAAM,IAAG,QAAQ,OAAO,IAAI;AAAA,QAAE,QAAQ;AAAA,QAAC;AAChM,WAAG,QAAQ,mBAAmB;AAC9B,cAAM,WAAW,GAAG;AAAA,MACtB,SAAS,GAAO;AACd,WAAG,MAAM,GAAG,iBAAiB,sBAAsB;AAAA,MACrD;AAAA,IACF;;;AA/BO,YAAA,OAAAA,eAAAC,WAAA,EAAA,OAAM,sBAAkB,MAAA,CAAA,CAAA,GAAA;;yBAC3B,CAQO,GAAAC,QAAAC,UAAA,aAAA;;yJALaC,MAAA,KAAA,CAAK,oFACLA,MAAA,QAAA,CAAQ;;cAGqC,IAAG;AAAA,cAAY,OAAM;AAAA,YAAA;+BAA/B,CAAqEC,IAAAH,QAAAC,UAAAG,cAAA;;;;;oCAAtB,aAAW;AAAA,kBAAA;AAAA;;;;;;;cAN/GC,YAAwD,MAAA,EAApD,OAAM,8BAAA,GAA8B,aAAW;AAAA,cACnDA,YAIO,QAAA;AAAA,gBAJA,wBAAgB,UAAQ,CAAA,SAAA,CAAA;AAAA,gBAAE,OAAM;AAAA,cAAA;+BACrCA,YAA+D,SAAA;AAAA,oEAA/C,MAAK,QAAA,SAAA;AAAA,kBAAE,aAAY;AAAA,kBAAQ,OAAM;AAAA,gBAAA;+BAAjCH,MAAA,KAAA,CAAK;AAAA,gBAAA;+BACrBG,YAAqF,SAAA;AAAA,uEAArE,SAAQ,QAAA,SAAA;AAAA,kBAAE,MAAK;AAAA,kBAAW,aAAY;AAAA,kBAAW,OAAM;AAAA,gBAAA;+BAAvDH,MAAA,QAAA,CAAQ;AAAA,gBAAA;gBACxBG,YAAuD,UAAA,EAA/C,OAAM,qBAAA,GAAqB,aAAW;AAAA,cAAA;cAEhDA,YAA8H,KAAA,EAA3H,OAAM,gCAA4B;AAAA,gCAAC,iBAAe;AAAA,gBAAAA,YAAqE,qBAAA;AAAA,kBAA3D,IAAG;AAAA,kBAAY,OAAM;AAAA,gBAAA;mCAAgB,MAAW;AAAA,oCAAX,aAAW;AAAA,kBAAA;;;;;;;;;;;;;;;;;;;","names":["_ssrRenderAttrs","_mergeProps","_push","_parent","_unref","_","_scopeId","_createVNode"],"sources":["../../../../pages/login.vue"],"sourcesContent":["<template>\n  <div class=\"max-w-md mx-auto\">\n    <Card>\n      <h2 class=\"text-2xl font-semibold mb-4\">เข้าสู่ระบบ</h2>\n      <form @submit.prevent=\"onSubmit\" class=\"space-y-3\">\n        <input v-model=\"email\" placeholder=\"อีเมล\" class=\"form-input\"/>\n        <input v-model=\"password\" type=\"password\" placeholder=\"รหัสผ่าน\" class=\"form-input\"/>\n        <button class=\"w-full btn-primary\">เข้าสู่ระบบ</button>\n      </form>\n      <p class=\"mt-3 text-sm text-gray-400\">ยังไม่มีบัญชี? <NuxtLink to=\"/register\" class=\"text-skyx-400\">สมัครสมาชิก</NuxtLink></p>\n    </Card>\n  </div>\n</template>\n<script setup lang=\"ts\">\nimport Card from '@/components/UI/Card.vue'\nimport { useUiStore } from '@/stores/ui'\nconst ui = useUiStore()\nconst email = ref('')\nconst password = ref('')\nconst userStore = useUserStore()\nconst onSubmit = async () => {\n  try {\n    await $fetch('/api/auth/login', { method: 'POST', body: { email: email.value, password: password.value } })\n    const me = await $fetch('/api/auth/me')\n    userStore.setUser(me)\n    // load latest plan into store\n    try { const latest:any = await $fetch('/api/plan/latest'); const ps = usePlanStore(); if (latest?.workouts) ps.setWorkouts(latest.workouts); if (latest?.meta) ps.setMeta(latest.meta) } catch {}\n    ui.success('เข้าสู่ระบบสำเร็จ')\n    await navigateTo('/')\n  } catch (e:any) {\n    ui.error(e?.statusMessage || 'เข้าสู่ระบบไม่สำเร็จ')\n  }\n}\n</script>\n"],"version":3}